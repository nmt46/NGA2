# NGA location if not yet defined
NGA_HOME ?= ../..

# Compilation parameters
PRECISION = DOUBLE
USE_MPI   = TRUE
USE_HYPRE = TRUE
USE_LAPACK= TRUE
USE_IRL   = TRUE
PROFILE   = FALSE
USE_COOLPROP= TRUE
DEBUG     = TRUE
COMP      = gnu
EXEBASE   = nga

# Directories that contain user-defined code
Udirs   := src

# Include user-defined sources
Upack   += $(foreach dir, $(Udirs), $(wildcard $(dir)/Make.package))
Ulocs   += $(foreach dir, $(Udirs), $(wildcard $(dir)))
include $(Upack)
INCLUDE_LOCATIONS += $(Ulocs)
VPATH_LOCATIONS   += $(Ulocs)

# Define external libraries - this can also be in .profile
HYPRE_DIR = /Users/natethompson/Builds/hypre
IRL_DIR   = /Users/natethompson/Builds/IRL
LAPACK_DIR= /usr/local/Cellar/lapack
COOLPROP_DIR= /Users/natethompson/Repositories/CoolProp
# HYPRE_DIR   = /home/fs01/od57/Repositories/hypre/src/hypre
# LAPACK_DIR  = /home/fs01/od57/Repositories/lapack
# IRL_DIR     = /home/fs01/od57/Repositories/IRL
# COOLPROP_DIR= /home/fs01/nmt46/Repositories/CoolProp

# NGA compilation definitions
include $(NGA_HOME)/tools/GNUMake/Make.defs

# Include NGA base code
Bdirs   := particles core variable_density subgrid data solver config grid libraries constant_density
Bpack   += $(foreach dir, $(Bdirs), $(NGA_HOME)/src/$(dir)/Make.package)
include $(Bpack)

# Inform user of Make.packages used
ifdef Ulocs
   $(info Taking user code from: $(Ulocs))
endif
$(info Taking base code from: $(Bdirs))

# Target definition
all: $(executable)
	@echo COMPILATION SUCCESSFUL

# NGA compilation rules
include $(NGA_HOME)/tools/GNUMake/Make.rules
